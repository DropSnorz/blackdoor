<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, shrink-to-fit=no, initial-scale=1">
    <title>BlackDoor - Cours 4</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Code Mirror -->
    <script src="lib/codeMirror/lib/codemirror.js"></script>
    <link rel="stylesheet" href="lib/codeMirror/lib/codemirror.css">
    <link rel="stylesheet" href="lib/codeMirror/theme/night.css">
    <script src="lib/codeMirror/mode/clike/clike.js"></script>

    <!-- Custom CSS -->
    <link href="css/simple-sidebar.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<div id="wrapper">
    <!-- Menu du cours -->
    <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
            <li class="sidebar-brand"><a href="index.html"> Blackdoor - Cours </a></li>
            <li><a href="index.html"> Accueil </a></li>
            <li><a href="cours1.html"> Cours 1 </a></li>
            <li><a href="cours2.html"> Shortcuts </a></li>
            <li><a href="cours3.html"> Overview </a></li>
            <li><a id="liActive" href="cours4.html"> Events </a></li>
            <li><a href="cours5.html"> About </a></li>
            <li><a href="cours6.html"> Services </a></li>
            <li><a href="cours7.html"> Contact </a></li>
            <li><a href="cours8.html"> Contact </a></li>
            <li><a href="cours9.html"> Contact </a></li>
        </ul>
    </div>
    <!-- Fin menu du cours -->

    <!-- Icone du menu -->
    <div id="menuWrapper">
        <a href="#menu-toggle" class="btn btn-default" id="menu-toggle">
            <span class="glyphicon glyphicon-menu-hamburger" id="spanMenu"></span>
        </a>
    </div>

    <!-- Page content -->
    <div id="page-content-wrapper">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1 id="titreCours">Concepts en Android</h1>
                    <h2>Préambule</h2>
                    <p>
                        Vous pouvez désormais manipuler de nombreuses données en provenance des téléphones mobiles de vos utilisateurs, félicitation ! Ce chapitre est un petit peu particulier, puisqu'il ne contiendra pas d'exercice. Nous allons vous présenter divers concepts, que les programmeurs tels que vous se doivent de connaitre. Nous parlerons ainsi de contexte, de curseur et de base de données. On y va ?
                    </p>

                    <h2> La classe Context</h2>

                    <p>
                        <code>Context</code> est une <strong>classe abstraite</strong> dont l'implémentation est assurée par le système Android. A travers cette classe, les programmeurs peuvent accéder à des ressources et des classes spécifiques à l'application, dont des méthodes permettant la gestion du broadcasting.
                    </p>

                    <div class="alert alert-info">
                        <strong> Info - </strong> En programmation orientée objet (POO), une classe abstraite est une classe dont l'implémentation n'est pas complète et qui n'est pas instanciable. Elle sert de base à d'autres classes, dites dérivées
                    </div>

                    <div class="alert alert-warning">
                        <strong> Attention - </strong> A l'image des cours précédents, il est nécessaire d'inclure la dépendance <code>android.content.Context</code>, présent dans le package <code>java.lang.Object</code>
                    </div>

                    <div class="alert alert-info">
                        <strong> Info - </strong> De nombreuses méthodes existes pour appeler le Context, mais nous utiliserons la méthode <code>getContext()</code>
                    </div>

                    <p> De nombreuses méthodes sont disponibles, mais voici celles que nous utiliserons le plus fréquemment</p>

                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th>Type</th>
                            <th>Fonction</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>abstract Resources.Theme</td>
                            <td> <code>getTheme()</code> <br>

                                Retourne l'objet Theme associé au contexte
                            </td>
                        </tr>
                        <tr>
                            <td>boolean</td>
                            <td> <code>isRestricted() </code> <br>

                                Retourne true ou false selon si le contexte est restreint ou non
                            </td>
                        </tr>
                        <tr>
                            <td>abstract ContentResolver</td>
                            <td> <code>getContentResolver()</code> <br>

                                Retourne une instance de ContentResolver pour notre package applicatif
                            </td>
                        <tr>
                            <td>abstract File</td>
                            <td> <code>getDatabasePath(String name)</code> <br>

                                Retourne le chemin absolu du système ou se situe la base de données préalablement créée
                            </td>
                        </tr>
                        </tbody>
                    </table>


                    <p>
                        Ainsi, Nous pourrons créer un objet afin d'obtenir le contexte de l'application sous cette forme
                    </p>

                    <div class="zoneCodeWrapper">
                            <textarea class="zoneCode">
import java.lang.Object; //Contient android.content.Context

Context monContexte = getContext();</textarea>
                        <div class="zoneCodeLegende">Utilisation du Context</div>
                    </div>

                    <p>
                        Bien sur, en l'état des choses, cette variable ne va pas nous servir. Généralement, on ne va pas mettre le contexte dans une variable de type Context, on s'en servira juste pour obtenir le contexte à un instant T comme pour les Curseurs. Néanmoins, vous pouvez consulter <a href="https://developer.android.com/reference/android/content/Context.html">l'API Android</a> pour connaitre toutes les méthodes et les constantes disponibles
                    </p>

                    <h2> La classe Cursor </h2>

                    <p>
                        L'interface <code>Cursor</code> nous donne des méthodes pour lancer des lectures et des écritures, notamment sur la base de données. C'est en manipulant des curseurs que nous allons accéder aux données. Nous ne détaillerons pas les méthodes de l'interface ici, mais vous pouvez les retrouver sur <a href="https://developer.android.com/reference/android/database/Cursor.html"> l'API Android</a>
                    </p>

                    <div class="alert alert-warning">
                        <strong> Attention - </strong> Il est encore une fois nécessaire d'inclure la dépendance <code>java.lang.Object</code>
                    </div>

                    <p>
                        Regardons comment nous pouvons déclarer un curseur
                    </p>

                    <div class="zoneCodeWrapper">
                            <textarea class="zoneCode">
import java.lang.Object;

Cursor monCurseur;</textarea>
                        <div class="zoneCodeLegende">Déclaration simple d'un curseur</div>
                    </div>

                    <p>
                        C'est tout ! Rien de plus difficile, notre curseur est créé. Pour aller plus loin, il faut comprendre les notions sur les bases de données Android
                    </p>

                    <h2>La classe SQLiteDatabase</h2>

                    <p>
                        C'est une des classes les plus importantes de la programmation Android, mais aussi celle qui va vous donner du fil à retordre : la classe <code>SQLiteDatabase</code>. C'est à travers les méthodes de cette classe que vous allez pouvoir modifier votre base de données. Généralement, on se sert d'un curseur que l'on initialise avec le contexte, pour lancer une requête sur notre base de données. Vous retrouverez à nouveau de précieuses informations sur <a href="https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html">l'API Android</a> !
                    </p>

                    <p> Supposons que nous souhaitions connaitre les derniers appels d'un téléphone, et que nous avons les autorisations nécéssaires. Voici à quoi pourrait ressembler notre code !</p>

                    <div class="alert alert-info">
                        <strong> Info - </strong> Les derniers appels se trouvent dans la classe <code>CallLog.Calls</code>
                    </div>

                    <div class="zoneCodeWrapper">
                            <textarea class="zoneCode">
import java.lang.Object;

Cursor monCursor = getContext().getContentResolver().query(android.provider.CallLog.Calls.CONTENT_URI,null, null, null,null);</textarea>
                        <div class="zoneCodeLegende">Chercher en base de données la liste des derniers appels</div>
                    </div>

                    <p>
                        C'est tout pour ce chapitre. Nous savons que peu d'informations sont disponibles, n'oubliez pas l'API Android !
                    </p>

                </div>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/perso.js"></script>
</body>
</html>
